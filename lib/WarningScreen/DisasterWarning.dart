import 'dart:ffi';
import 'dart:math';
import 'package:flutter/material.dart';
import '../main.dart';

class Disasterwarning extends StatelessWidget {
  final List<Map<String, dynamic>> shelters = [
    {
      'name': '지진',
      'details': '''
🌍 **지진이 발생하면 이렇게 대피합니다** 🌍  

1️⃣ **튼튼한 탁자 아래에 들어가 몸을 보호합니다.**  
   - 지진으로 크게 흔들리는 시간은 길어야 1~2분 정도입니다.  
   - 튼튼한 탁자 아래로 들어가 탁자 다리를 꼭 잡고 몸을 보호하세요.  
   - 탁자 아래와 같이 피할 곳이 없을 때에는 방석 등으로 머리를 보호합니다.  

2️⃣ **가스와 전깃불을 차단하고 문을 열어 출구를 확보합니다.**  
   - 흔들림이 멈춘 후 당황하지 말고 화재에 대비하여 가스와 전깃불을 끕니다.  
   - 문이나 창문을 열어 언제든 대피할 수 있도록 출구를 확보합니다.  

3️⃣ **집에서 나갈 때는 신발을 신고 이동합니다.**  
   - 유리 조각이나 떨어져 있는 물체 때문에 발을 다칠 수 있으니, 발을 보호할 수 있는 신발을 꼭 신고 이동하세요.  

4️⃣ **계단을 이용하여 밖으로 대피합니다.**  
   - 엘리베이터가 멈출 수 있으므로 타지 말고, 계단을 이용하여 건물 밖으로 대피하세요.  

5️⃣ **건물이나 담장으로부터 떨어져 이동합니다.**  
   - 건물 밖으로 나오면 담장, 유리창 등이 파손되어 다칠 수 있으니, 건물과 담장에서 최대한 멀리 떨어져 가방이나 손으로 머리를 보호하면서 대피하세요.  
   - 담장이나 전봇대는 지진으로 파손되거나 지반도 약해져 넘어질 수 있으니 기대지 마세요.  

6️⃣ **낙하물이 없는 넓은 공간으로 대피합니다.**  
   - 운동장이나 공원 등 넓은 공간으로 신속히 이동하세요.  
   - 차량을 이용하지 말고 걸어서 대피하며, 떨어지는 물건에 주의하세요.
'''
    },
    {'name': '태풍', 'details': '''
        🌪️ 태풍 특보 중 안전 지침 🌪️

    1️⃣ 외출 자제 및 정보 공유

    나와 가족, 지인들의 안전을 위해 외출을 자제합니다.
    TV, 라디오 등을 통해 기상정보를 청취하며 내 지역의 상황을 지속적으로 파악합니다.
    안전 및 위험 정보를 주변 사람들과 공유합니다.
    2️⃣ 차량 및 위험 지역 접근 금지

    차량은 속도를 줄여 운행하며 하천변, 해안가 등 급류에 휩쓸릴 수 있는 지역이나 침수 위험 지역에는 접근하지 않습니다.
    침수된 도로, 지하차도, 교량 등에서는 차량 통행을 엄격히 금지합니다.
    3️⃣ 건물 내 안전 조치

    건물의 출입문과 창문을 닫아 파손되지 않도록 합니다.
    강풍으로 인한 피해를 예방하기 위해 창문 없는 방이나 집안의 가장 안쪽으로 이동합니다.
    가스 누출을 차단하고 감전 위험이 있는 전기시설은 만지지 않습니다.
    정전 발생 시 양초 대신 휴대용 랜턴이나 휴대폰을 사용합니다.
    4️⃣ 즉시 대피 및 안전 확인

    위험 지역에서는 즉시 안전한 곳으로 주변 사람들과 함께 대피합니다.
    침수 지역, 산간·계곡 등 위험 지역에 있거나 대피 권고를 받으면 신속히 안전한 지역으로 이동합니다.
    특히 연세가 많거나 홀로 계신 어르신, 어린이, 장애인 등의 안전을 돕습니다.
    5️⃣ 위험 지역 접근 금지

    공사장, 전신주, 지하 공간 등 위험 지역에는 접근하지 않습니다.
    침수되거나 파손된 도로와 교량 주변은 피하며 대피합니다.
    농촌 지역에서는 논둑이나 물꼬를 보러 나가지 않습니다.
    이동식 가옥이나 임시 시설에 거주 중이라면 즉시 견고한 건물로 이동합니다.
    6️⃣ 운행 중 선박 대피

    운행 중인 선박은 주변 선박이나 해경에 현재 위치를 알리고 태풍의 이동 경로에서 최대한 멀리 대피합니다.'''
    },
    {'name': '화재', 'details': '''
    🔥 화재 사고 발생 시 대피 및 초기 조치 요령 🔥

1️⃣ 화재 발생 알림
불이 났다는 것을 신속히 주변에 알립니다.
경보기, 큰 목소리, 또는 기타 방법을 활용하여 주위 사람들에게 화재를 알리고 긴급히 대피할 수 있도록 합니다.
즉시 119에 신고하여 소방차가 출동하도록 요청합니다.
침착하고 정확히 다음과 같은 정보를 전달합니다:
화재 발생 장소: 예) "여기는 종로구 수송동 100번지, 한국통신 뒤 6층 건물의 지하실에서 불이 났습니다."
신고자의 전화번호.
무엇이 타고 있는지, 사람이 거주하는지 여부도 함께 알리면 유용합니다.
2️⃣ 초기 소화 조치
화재 신고 후 화재 상황에 따라 적절한 초기 소화 조치를 시행합니다.
🔌 전기 화재
전기 스위치를 내려 전원을 차단합니다(분전반, 차단기 등).
⚠️ 물을 사용하지 마세요. (감전 위험 있음)
🛢️ 석유 및 기름 화재
담요나 이불을 물에 적셔서 불 위에 덮습니다.
⚠️ 물을 사용하지 마세요. (기름 화재는 물을 사용하면 불이 더 커질 수 있음)
🔥 가스 화재
가스 용기의 밸브를 잠급니다.
⚠️ 주의:
갑작스럽게 문을 열거나 전기 스위치를 조작하지 않습니다. (폭발 위험 있음)
주의 사항
화재 초기 진압이 불가능한 경우 즉시 대피하십시오.
대피 시 연기를 마시지 않도록 젖은 천으로 입과 코를 가리고 몸을 낮춘 상태로 이동합니다.
    '''},
    {'name': '폭우', 'details': '''
    ☔ 폭우 발생 시 대피 및 안전 요령 ☔

1️⃣ 사전 준비 및 안전 확인
기상청 예보와 재난 방송을 통해 폭우 상황을 수시로 확인합니다.
저지대, 하천변, 해안가, 침수 위험 지역에 접근하지 않습니다.
집 안에서 대피 준비를 합니다:
전자기기 및 중요한 물품은 높은 곳으로 옮겨두세요.
하수구, 집안 배수구를 점검하여 물이 역류하지 않도록 대비합니다.
2️⃣ 침수 지역 대피
물이 불어나기 시작하면 즉시 안전한 지역으로 대피합니다.
침수된 도로, 지하차도, 교량 등은 절대 접근하지 않습니다.
차량을 운전 중이라면 물이 잠기기 시작한 도로는 피하고, 차량을 버리고 고지대로 대피합니다.
🚗 차량이 물에 잠기면 즉시 창문을 깨고 탈출합니다.
산간 계곡, 급류가 발생하는 하천 근처에는 가지 않습니다.
3️⃣ 실내 안전 수칙
가정에서는 전기 누전을 예방하기 위해 전기 스위치를 내려 전원을 차단합니다.
창문과 출입문을 단단히 닫아 폭우와 강풍에 대비합니다.
물이 들어올 위험이 있는 집이라면 방수벽을 설치하거나 문틈을 막아 물 유입을 차단합니다.
4️⃣ 이동 시 주의 사항
침수된 도로와 인도에서는 보이지 않는 맨홀이나 깊은 웅덩이에 빠질 위험이 있으므로 주의하세요.
대피할 때는 절대 차량을 이용하지 말고 도보로 이동합니다.
산사태가 우려되는 지역은 즉시 피하고, 안전한 대피소로 이동합니다.

    '''},
    {'name': '해일', 'details': '''
    🌊 해일 특보 시 국민 행동 요령 🌊

1️⃣ 사전 준비
TV나 라디오를 통해 기상 상황과 해일 경보를 주의 깊게 청취합니다.
해안 저지대 주민은 비상 상황 발생 시를 대비하여 대피 장소와 대피 방법을 미리 숙지합니다.
가까운 행정기관(시·군·구청, 소방서 등)의 전화번호를 가족 모두가 알 수 있는 곳에 보관합니다.
이웃 간의 연락 방법을 미리 공유합니다.
공사 중인 현장에서는 작업을 즉시 중지하고, 떠내려가거나 파손될 위험이 있는 기자재는 안전한 곳으로 이동시킵니다.
2️⃣ 대피 시 행동 요령
기상청의 해일 경보 또는 행정기관(시·군·구청, 소방서)의 대피 명령이 내려지면 즉시 대피합니다.
해일이 밀려들기 시작하면 즉시 높은 곳으로 이동합니다:
1층보다는 2층, 2층보다는 3층으로 이동합니다.
필요할 경우 지붕으로 이동합니다.
3️⃣ 안전한 대피 장소
목조 주택은 해일로 떠내려갈 가능성이 있으니, 벽돌 건물 또는 철근 콘크리트 건물로 이동합니다.
해안에서 멀리 떨어지고 지형이 높은 안전한 곳으로 이동합니다.
해안에서 멀리 떨어진 곳은 직접적인 파도의 영향을 받지 않으며, 바닥에서 2~3m 이상 높이만 돼도 비교적 안전합니다.
    '''},
    {'name': '홍수', 'details': '''
    🌧️ 홍수 예·경보 시 국민 행동 요령 🌧️

1️⃣ 사전 대비
라디오, TV, 인터넷 등을 통해 기상 변화를 지속적으로 확인합니다.
홍수 피해가 예상되는 지역에서는 대피 가능한 장소와 경로를 사전에 숙지합니다.
침수 위험 지역에 거주하는 경우 **필요한 비상 물품(식량, 식수, 의약품)**을 준비합니다.
2️⃣ 홍수 발생 시 대피 요령
갑작스러운 홍수가 발생하면 즉시 높은 곳으로 대피합니다.
비탈면이나 산사태 발생 가능 지역에는 가까이 가지 않습니다.
특히, 바위나 자갈 등이 흘러내릴 수 있는 비탈면 지역의 도로 통행을 삼가고, 이동 시 주변 상황을 주의 깊게 살핍니다.
침수 지역에서는 차량을 운전하지 말고, 차량이 물에 잠길 경우 즉시 차량을 버리고 대피합니다.
3️⃣ 가정 내 안전 조치
홍수 예상 시 전기 차단기를 내리고, 가스 밸브를 잠급니다.
침수된 주택에 거주하는 경우:
가스와 전기 차단기가 OFF 상태인지 확인합니다.
전문 기술자의 안전 점검 후에만 사용해야 합니다.
4️⃣ 대피소 도착 시 행동 요령
지정된 대피소에 도착하면 도착 사실을 반드시 알립니다.
대피소에서 제공하는 통제와 안내에 따라 행동합니다.
5️⃣ 수돗물 및 식수 사용
침수 이후 수돗물이나 저장식수가 오염되었을 가능성이 있으므로, 반드시 오염 여부를 조사한 후 사용합니다.
    '''},
    {'name': '폭염', 'details': '''
    ☀️ 폭염 대비 국민 행동 요령 ☀️

1️⃣ 사전 준비
라디오나 TV를 통해 매일 무더위 관련 기상 상황을 확인합니다.
정전에 대비해 손전등, 비상 식음료, 부채, 휴대용 라디오 등을 준비합니다.
집 가까운 병원의 연락처를 확인하고, 가족과 함께 열사병 증상(현기증, 메스꺼움, 두통 등)을 체크합니다.
단수 대비: 생수를 준비하고, 생활용수는 욕조에 미리 받아 둡니다.
냉방 기기를 사용할 경우, 실내·외 온도 차를 5℃ 내외로 유지하여 냉방병을 예방합니다.
적정 냉방 온도: 26~28℃
변압기를 점검해 과부하에 대비합니다(특히 오래된 공동주택 주의).
창문에 커튼이나 천을 이용해 직사광선을 차단합니다.
차량의 장거리 운행 계획 시 도로 변형 가능성에 유의하며 신중히 검토합니다.
2️⃣ 일반 가정
야외활동 자제: 외출 시 가벼운 옷을 착용합니다.
수분 섭취: 카페인 음료나 주류는 피하고 물을 많이 마십니다.
냉방이 안 되는 실내에서는 햇볕을 차단하고 맞바람이 통하도록 환기합니다.
자동차 안에 노약자나 어린이를 홀로 두지 않습니다.
거동이 불편한 고령자, 어린이, 신체 허약자, 환자 등은 외출을 삼가도록 합니다.
탈수 예방: 소금을 섭취할 때는 반드시 의사의 조언을 따릅니다.
증상이 나타나면(현기증, 두통 등) 가까운 의료기관에 문의합니다.
정오~오후 5시 사이에는 냉방 가능한 건물에서 2시간 이상 머무릅니다.
3️⃣ 직장
친목 도모를 위한 스포츠 경기 등 야외 행사를 자제합니다.
점심시간 등을 활용해 가벼운 낮잠을 취합니다.
자율 복장 근무를 통해 근무 환경을 개선합니다.
4️⃣ 산업 및 건설 현장
작업 중에는 짧고 자주 휴식을 취합니다.
야외 장시간 근무 시 아이스팩 조끼를 착용합니다.
밀폐된 실내 작업장은 피하며, 건설기계 냉각장치를 수시로 점검해 과열을 방지합니다.
매 15~20분 간격으로 1컵 정도의 물(염분 포함)을 섭취합니다(알코올 및 카페인 음료 금지).
고열기계 및 화염 등 열 발생원을 피하고 방열막을 설치합니다.
발한작용을 방해하는 밀착된 의복 착용은 피합니다.
5️⃣ 농가 및 축사
축사 천장에 단열재를 부착하고, 선풍기·환기를 통해 적정 사육 밀도를 유지합니다.
물분무 장치를 설치해 복사열을 방지합니다.
스프링클러를 이용한 관수 작업으로 노지 재배 채소를 보호합니다.
병충해 증가에 대비해 방제를 강화합니다.
하우스 내부는 차광 시설, 점적관수, 수막 시설을 설치합니다.
    '''},
    {'name': '한파', 'details': '''
    ❄️ 한파 특보 시 국민 행동 요령 ❄️

1️⃣ 건강 관리
유아, 노인, 환자 보호:
급격한 기온 저하로 심장, 혈관계, 호흡기 계통의 질환이 악화될 수 있으므로 난방에 신경 씁니다.
혈압이 높거나 심장이 약한 사람은 머리와 노출 부위를 따뜻하게 보호합니다. (모자, 귀마개, 목도리 착용)
운동 시 준비:
운동 전 충분한 스트레칭으로 관절의 부상을 예방합니다.
저체온증 조심:
심한 한기, 방향감각 상실, 기억 상실, 발음 불분명 등의 증상이 나타나면 즉시 병원으로 갑니다.
동상 예방 및 대처:
손가락, 발가락, 귓바퀴, 코끝 등 신체 말단부위를 따뜻하게 보호합니다.
동상 발생 시 죄는 신발이나 옷을 벗고, 따뜻한 물로 씻은 뒤 보온 상태를 유지하며 병원으로 갑니다.
❌ 주의: 동상 부위를 비비거나 갑자기 불에 쬐면 안 됩니다.
2️⃣ 수도 및 가정 관리
동파 예방:
장기간 집을 비울 경우 수도꼭지를 약간 열어 물이 흐르게 합니다.
수도계량기 보호함 내부를 헌옷으로 채우고 외부를 테이프로 막아 찬 공기가 스며들지 않도록 합니다.
복도식 아파트에서는 수도계량기 보온에 각별히 유의합니다.
수도관 동결 시:
뜨거운 열을 갑자기 가하지 말고, 헤어드라이기 등 온열기를 사용하거나 미지근한 물로 녹입니다.
3️⃣ 도로 및 차량 관리
빙판길 대비:
스노체인, 염화칼슘, 삽 등 자동차 월동 용품을 준비합니다.
부동액, 축전지, 윤활유 등 자동차 상태를 점검합니다.
빙판길 운전 요령:
수동변속기 차량은 2단 기어와 반 클러치를 사용합니다.
자동변속기 차량은 가속기를 서서히 밟고, 바퀴가 헛돌지 않도록 출발 시 앞바퀴를 직진 상태로 유지합니다.
커브길 진입 전 속도를 줄이고, 기어 변속은 하지 않습니다.
멈출 때는 엔진브레이크로 속도를 줄인 후 풋브레이크를 사용합니다.
저속 운행과 충분한 차간 거리 확보로 안전사고를 예방합니다.
4️⃣ 한파 대비 생활 수칙
외출 후 손발을 씻고, 과도한 음주나 피로 누적을 피합니다.
만성질환자(당뇨, 폐질환 등)는 독감 예방접종을 합니다.
집안에서 햇볕이 잘 드는 공간을 활용하고, 외부 창문은 단열 커튼으로 보온합니다.
    '''},
    {'name': '폭설', 'details': '''
    ❄️ 폭설 특보 시 국민 행동 요령 ❄️

1️⃣ 운전 및 교통 안전
라디오, TV, 스마트폰 등을 통해 기상 상황 및 교통 상황을 수시로 파악합니다.
출발 전 기상정보와 목적지까지의 우회도로를 확인하고, 월동 장비(스노우 체인, 모래주머니, 삽 등), 연료, 식음료를 준비합니다.
눈길 운전 시:
커브길, 고갯길, 고가도로, 교량 등 결빙구간에서는 천천히 운전합니다.
제동거리가 길어지므로 교차로나 횡단보도 앞에서는 감속 운전합니다.
대중교통 이용: 자가용 대신 지하철, 버스 등 대중교통을 이용합니다.
제설작업 차량 및 구급차를 위해 갓길 주·정차를 삼가고, 차량 고장 시 즉시 도로관리기관, 경찰서, 소방서에 연락합니다.
2️⃣ 차량 고립 시 대처 요령
차량이 고립되면 휴대전화로 가족, 친지, 경찰, 도로관리기관 등에 상황을 알립니다.
차량 안에서 라디오나 재난 문자방송 등을 통해 교통 상황 및 행동 요령을 확인합니다.
차량 히터를 사용할 때는 창문을 자주 열어 환기를 합니다.
배기관(머플러)이 눈으로 막히지 않도록 차량 주변 눈을 수시로 치웁니다.
체온 유지: 담요나 두꺼운 옷을 덮고 가볍게 몸을 움직입니다.
동승자가 있을 경우 교대로 잠을 자며 주위 상황을 살핍니다.
차량을 벗어날 경우, 연락처를 남기고 열쇠를 꽂은 채 대피합니다.
3️⃣ 일반 생활 요령
눈이 많이 내릴 때는 지붕이 무너질 위험이 있는 비닐하우스 등 농작물 재배시설을 미리 점검하고 받침대를 보강합니다.
대설로 인해 교통이 마비될 경우, 대중교통을 이용하거나 대피소에 머물며 관계기관의 통제에 협조합니다.
눈사태 및 낙빙 우려 지역에서는 즉시 안전한 곳으로 이동합니다.
    '''},
    {'name': '낙뢰', 'details': '''
    ⚡ 낙뢰 발생 시 국민 행동 요령 ⚡

1️⃣ 낙뢰 예보 시 대비
기상 예보(라디오, TV, 스마트폰)를 통해 낙뢰 위험 여부를 확인합니다.
낙뢰가 예상될 경우 외출을 삼가고, 건물 안, 자동차 안, 지하 등 안전한 장소로 대피합니다.
야외활동(등산, 낚시, 골프 등)을 계획 중이라면 기상 정보를 사전에 확인하고 활동을 자제합니다.
우산 대신 비옷을 준비합니다.
2️⃣ 낙뢰 발생 시 행동 요령
번개를 본 후 30초 이내에 천둥소리가 들리면 즉시 안전한 장소로 대피합니다.
실내에서는 전자제품의 플러그를 빼고, 1m 이상의 거리를 유지합니다.
전화, 전기제품, 금속 물체 사용 금지: 전류가 전선을 통해 흐를 수 있으므로 주의합니다.
창문을 닫고, 샤워나 설거지 등 물 사용을 피합니다.
야외에서는 다음을 피하세요:
높은 장소(산 정상, 고지대)
키 큰 나무, 전신주 근처
금속 물체(우산, 골프채, 낚싯대 등)
젖은 지면이나 물가
평지에서는 몸을 최대한 낮추고, 물기가 없는 움푹 파인 곳으로 이동합니다.
3️⃣ 차량 내에서 행동 요령
차량 안은 비교적 안전하지만, 차를 세우고 라디오 안테나를 내린 채 대기합니다.
환기를 위해 창문을 약간 열고, 배기관(머플러)이 눈이나 물로 막히지 않도록 확인합니다.
4️⃣ 응급처치 요령
낙뢰로 감전된 피해자를 발견하면 즉시 119에 신고합니다.
안전한 장소로 옮긴 후 의식 여부를 확인합니다:
호흡이 멎었으면 인공호흡, 맥박이 멎었으면 심폐소생술을 시행합니다.
화상 부위를 체크하고, 피해자가 편안한 자세를 취하도록 돕습니다.
환자가 의식이 있어도 내부 손상이 있을 수 있으므로 반드시 병원에서 진찰을 받습니다.
5️⃣ 30-30 안전 규칙
번개 후 30초 이내 천둥소리가 들리면 즉시 대피합니다.
마지막 천둥 소리가 난 후 30분이 지나기 전까지는 실내에 머물러야 안전합니다.

    '''},
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.grey[300], 
      appBar: AppBar(
        title: Text('재난 대피시 주의 사항'),
      ),
      body: ListView.builder(
        itemCount: shelters.length,
        itemBuilder: (context, index) {
          final shelter = shelters[index];
          return GestureDetector(
            onTap: () {
              if (shelter['details']?.isNotEmpty ?? false) {
                // 팝업 다이얼로그 표시
                showDialog(
                  context: context,
                  builder: (context) => AlertDialog(
                    title: Text(shelter['name']),
                    content: SingleChildScrollView(
                      child: Text(shelter['details']),
                    ),
                    actions: [
                      TextButton(
                        onPressed: () {
                          Navigator.pop(context);
                        },
                        child: Text('닫기'),
                      ),
                    ],
                  ),
                );
              }
            },
            child: Card(
              margin: EdgeInsets.symmetric(vertical: 8.0, horizontal: 16.0),
              child: Padding(
                padding: const EdgeInsets.all(16.0),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.center,
                  children: [
                    Text(
                      shelter['name'],
                      style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                    ),
                  ],
                ),
              ),
            ),
          );
        },
      ),
    );
  }
}
